{"version":3,"file":"main.js","mappings":"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","sources":["webpack://sharkgame/./src/index.ts"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar solve = function (cavity, remaining) {\n    // Divide the target number minus 1 by 4 and take the remainder\n    // (or modulus, for the math nerds), as well as keeping the quotient handy.\n    // (18-1)/4 is 4 with a remainder of 1. This remainder is important,\n    // but so is the quotient, so keep 1 and 4 in mind.\n    var target = remaining - cavity - 1;\n    var rem = target % 4;\n    var quot = Math.floor((target - 1) / 4);\n    return { rem: rem, quot: quot };\n};\nvar sleep = function (ms) { return new Promise(function (res) { return setTimeout(res, ms); }); };\nvar main = function () { return __awaiter(void 0, void 0, void 0, function () {\n    var scale, canvasContainer, hitboxes, maxWidth, maxHeight, actualWidth, actualHeight, images, scaledImages, makeImg, scaledImagesWithImages, makeCanvas, scaledImagesWithImagesWithCanvases, drawImg, state, clickLock, resetButton, _drawHitboxen;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                scale = 1.5;\n                canvasContainer = document.getElementById(\"shark-game\");\n                if (!canvasContainer) {\n                    throw new Error(\"Container not found\");\n                }\n                hitboxes = {\n                    ids: {},\n                    hitboxes: {},\n                };\n                maxWidth = 390;\n                maxHeight = 404;\n                actualWidth = 0;\n                actualHeight = 0;\n                images = __spreadArray([\n                    {\n                        id: \"background\",\n                        src: \"background.png\",\n                        width: 394,\n                        left: 29,\n                        top: 29,\n                    },\n                    {\n                        id: \"frame\",\n                        src: \"frame.png\",\n                        width: 448,\n                        left: 0,\n                        top: 0,\n                    },\n                    { id: \"shark\", src: \"shark.png\", width: 392, left: 30, top: 30 }\n                ], __spreadArray([], Array(20), true).map(function (_, index) {\n                    var i = index + 1;\n                    return {\n                        id: \"tooth-\".concat(i),\n                        src: i < 10 ? \"tooth_0\".concat(i, \".png\") : \"tooth_\".concat(i, \".png\"),\n                        width: 392,\n                        left: 30,\n                        top: 30,\n                    };\n                }), true);\n                scaledImages = images.map(function (_a) {\n                    var width = _a.width, left = _a.left, top = _a.top, rest = __rest(_a, [\"width\", \"left\", \"top\"]);\n                    return (__assign({ width: Math.floor(width * scale), height: Math.floor((maxHeight / maxWidth) * width * scale), left: Math.floor(left * scale), top: Math.floor(top * scale) }, rest));\n                });\n                // find the largest dimesntions and set the canvas width/height to that\n                scaledImages.forEach(function (_a) {\n                    var width = _a.width, height = _a.height;\n                    if (actualWidth < width) {\n                        actualWidth = width;\n                    }\n                    if (actualHeight < height) {\n                        actualHeight = height;\n                    }\n                });\n                canvasContainer.style.position = \"relative\";\n                canvasContainer.style.width = \"\".concat(actualWidth, \"px\");\n                canvasContainer.style.height = \"\".concat(actualHeight, \"px\");\n                makeImg = function (image) { return __awaiter(void 0, void 0, void 0, function () {\n                    var id, src, width, height, left, top, container, img;\n                    return __generator(this, function (_a) {\n                        id = image.id, src = image.src, width = image.width, height = image.height, left = image.left, top = image.top;\n                        container = document.createElement(\"div\");\n                        img = document.createElement(\"img\");\n                        img.src = \"images/\".concat(src);\n                        container.appendChild(img);\n                        return [2 /*return*/, new Promise(function (resolve) {\n                                var onLoad = function (e) {\n                                    if (id.startsWith(\"tooth\") && !hitboxes.ids[id]) {\n                                        hitboxes.ids[id] = true;\n                                        var pixelFinder = document.createElement(\"canvas\");\n                                        pixelFinder.width = actualWidth;\n                                        pixelFinder.height = actualHeight;\n                                        var pxlCtx = pixelFinder.getContext(\"2d\");\n                                        if (!pxlCtx) {\n                                            throw new Error(\"Something wonky with this context yo\");\n                                        }\n                                        pxlCtx.drawImage(img, left, top, width, height);\n                                        var imgd = pxlCtx.getImageData(0, 0, actualWidth, actualHeight);\n                                        var pix = imgd.data;\n                                        for (var x = 0; x < actualWidth; x++) {\n                                            for (var y = 0; y < actualHeight; y++) {\n                                                var index = (y * actualWidth + x) * 4;\n                                                var alpha = pix[index + 3];\n                                                if (alpha > 1) {\n                                                    hitboxes.hitboxes[\"\".concat(x, \"-\").concat(y)] = id;\n                                                }\n                                            }\n                                        }\n                                    }\n                                    resolve(__assign(__assign({}, image), { image: img }));\n                                    img.removeEventListener(\"load\", onLoad);\n                                };\n                                img.addEventListener(\"load\", onLoad);\n                            })];\n                    });\n                }); };\n                return [4 /*yield*/, Promise.all(scaledImages.map(makeImg))];\n            case 1:\n                scaledImagesWithImages = _a.sent();\n                makeCanvas = function (image) {\n                    var canvas = document.createElement(\"canvas\");\n                    canvas.style.position = \"absolute\";\n                    canvas.style.top = \"0\";\n                    canvas.style.left = \"0\";\n                    canvas.style.background = \"transparent\";\n                    canvas.width = actualWidth;\n                    canvas.height = actualHeight;\n                    var ctx = canvas.getContext(\"2d\");\n                    if (!ctx) {\n                        throw new Error(\"Something wonky with this context yo\");\n                    }\n                    ctx.imageSmoothingEnabled = false;\n                    canvasContainer.appendChild(canvas);\n                    return __assign(__assign({}, image), { canvas: canvas, ctx: ctx });\n                };\n                scaledImagesWithImagesWithCanvases = scaledImagesWithImages.map(makeCanvas);\n                drawImg = function (img) {\n                    var ctx = img.ctx, image = img.image, left = img.left, top = img.top, width = img.width, height = img.height, _a = img.tint, tint = _a === void 0 ? null : _a, clear = img.clear;\n                    if (clear) {\n                        ctx.clearRect(0, 0, actualWidth, actualHeight);\n                    }\n                    else if (tint) {\n                        var color = tint.color, _b = tint.alpha, alpha = _b === void 0 ? 0.5 : _b;\n                        var backBuffer = document.createElement(\"canvas\");\n                        backBuffer.width = actualWidth;\n                        backBuffer.height = actualHeight;\n                        var btx = backBuffer.getContext(\"2d\");\n                        if (!btx) {\n                            throw new Error(\"Something wonky with this context yo\");\n                        }\n                        btx.clearRect(0, 0, actualWidth, actualHeight);\n                        btx.drawImage(image, left, top, width, height);\n                        // Now we'll multiply a rectangle of your chosen color\n                        btx.fillStyle = color;\n                        btx.globalCompositeOperation = \"multiply\";\n                        btx.fillRect(0, 0, actualWidth, actualHeight);\n                        btx.globalAlpha = alpha;\n                        btx.globalCompositeOperation = \"destination-in\";\n                        btx.drawImage(image, left, top, width, height);\n                        ctx.drawImage(backBuffer, 0, 0, actualWidth, actualHeight);\n                    }\n                    else {\n                        ctx.drawImage(image, left, top, width, height);\n                    }\n                };\n                scaledImagesWithImagesWithCanvases.forEach(function (img) { return drawImg(img); });\n                state = { state: \"select-cavity\" };\n                clickLock = { lock: null };\n                resetButton = document.getElementById(\"reset\");\n                if (!resetButton) {\n                    throw new Error(\"Reset button not found\");\n                }\n                resetButton.addEventListener(\"click\", function () { return __awaiter(void 0, void 0, void 0, function () {\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                if (!clickLock.lock) return [3 /*break*/, 2];\n                                return [4 /*yield*/, clickLock.lock];\n                            case 1:\n                                _a.sent();\n                                _a.label = 2;\n                            case 2:\n                                state = { state: \"select-cavity\" };\n                                scaledImagesWithImagesWithCanvases\n                                    .filter(function (i) { return i.id.startsWith(\"tooth\"); })\n                                    .map(drawImg);\n                                return [2 /*return*/];\n                        }\n                    });\n                }); });\n                canvasContainer.addEventListener(\"click\", function (e) { return __awaiter(void 0, void 0, void 0, function () {\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                if (clickLock.lock !== null) {\n                                    return [2 /*return*/];\n                                }\n                                clickLock.lock = new Promise(function (res) { return __awaiter(void 0, void 0, void 0, function () {\n                                    var canvasRect, x, y, hitboxId, image, target, _loop_1, i, instructionsContent, rem;\n                                    var _a;\n                                    return __generator(this, function (_b) {\n                                        switch (_b.label) {\n                                            case 0:\n                                                canvasRect = canvasContainer.getBoundingClientRect();\n                                                x = Math.floor(e.offsetX);\n                                                y = Math.floor(e.offsetY);\n                                                hitboxId = hitboxes.hitboxes[\"\".concat(x, \"-\").concat(y)];\n                                                if (!hitboxId) return [3 /*break*/, 7];\n                                                image = scaledImagesWithImagesWithCanvases.find(function (_a) {\n                                                    var id = _a.id;\n                                                    return id === hitboxId;\n                                                });\n                                                if (!image) return [3 /*break*/, 6];\n                                                target = parseInt(hitboxId.split(\"-\")[1], 10);\n                                                if (!(state.state === \"select-cavity\")) return [3 /*break*/, 1];\n                                                drawImg(__assign(__assign({}, image), { tint: { color: \"#F00000\", alpha: 0.3 } }));\n                                                state = { state: \"select-tooth\", cavity: target, selected: null };\n                                                return [3 /*break*/, 6];\n                                            case 1:\n                                                if (!(target < state.cavity &&\n                                                    (state.selected == null || state.selected < target))) return [3 /*break*/, 6];\n                                                _loop_1 = function (i) {\n                                                    var image_1;\n                                                    return __generator(this, function (_c) {\n                                                        switch (_c.label) {\n                                                            case 0:\n                                                                image_1 = scaledImagesWithImagesWithCanvases.find(function (_a) {\n                                                                    var id = _a.id;\n                                                                    return id === \"tooth-\".concat(i);\n                                                                });\n                                                                if (!image_1) return [3 /*break*/, 2];\n                                                                drawImg(__assign(__assign({}, image_1), { clear: true }));\n                                                                return [4 /*yield*/, sleep(150)];\n                                                            case 1:\n                                                                _c.sent();\n                                                                _c.label = 2;\n                                                            case 2: return [2 /*return*/];\n                                                        }\n                                                    });\n                                                };\n                                                i = (_a = state.selected) !== null && _a !== void 0 ? _a : 1;\n                                                _b.label = 2;\n                                            case 2:\n                                                if (!(i <= target)) return [3 /*break*/, 5];\n                                                return [5 /*yield**/, _loop_1(i)];\n                                            case 3:\n                                                _b.sent();\n                                                _b.label = 4;\n                                            case 4:\n                                                i++;\n                                                return [3 /*break*/, 2];\n                                            case 5:\n                                                if (target + 1 === state.cavity) {\n                                                    state = {\n                                                        state: \"win\",\n                                                        cavity: state.cavity,\n                                                        selected: target,\n                                                    };\n                                                }\n                                                else {\n                                                    state = {\n                                                        state: \"select-tooth\",\n                                                        cavity: state.cavity,\n                                                        selected: target,\n                                                    };\n                                                }\n                                                _b.label = 6;\n                                            case 6:\n                                                instructionsContent = document.getElementById(\"instructions-content\");\n                                                if (!instructionsContent) {\n                                                    throw new Error(\"Instructions content area not found\");\n                                                }\n                                                switch (state.state) {\n                                                    case \"select-cavity\": {\n                                                        instructionsContent.textContent =\n                                                            \"Select the tooth with the cavity!\";\n                                                        break;\n                                                    }\n                                                    case \"select-tooth\": {\n                                                        rem = solve(21 - state.cavity, 21 - (state.selected || 0)).rem;\n                                                        instructionsContent.textContent = \"Select the currently played tooth!\\nIf it's your turn, then play \".concat(rem || 1, \"!\");\n                                                        break;\n                                                    }\n                                                    case \"win\": {\n                                                        instructionsContent.textContent = \"If it's your turn, then you've won!\";\n                                                        break;\n                                                    }\n                                                }\n                                                _b.label = 7;\n                                            case 7:\n                                                res();\n                                                return [2 /*return*/];\n                                        }\n                                    });\n                                }); });\n                                return [4 /*yield*/, clickLock.lock];\n                            case 1:\n                                _a.sent();\n                                clickLock.lock = null;\n                                return [2 /*return*/];\n                        }\n                    });\n                }); });\n                _drawHitboxen = function () {\n                    var canvas = document.createElement(\"canvas\");\n                    canvas.style.position = \"absolute\";\n                    canvas.style.top = \"0\";\n                    canvas.style.left = \"0\";\n                    canvas.style.background = \"transparent\";\n                    canvas.width = actualWidth;\n                    canvas.height = actualHeight;\n                    var ctx = canvas.getContext(\"2d\");\n                    if (!ctx) {\n                        throw new Error(\"Something wonky with this context yo\");\n                    }\n                    ctx.imageSmoothingEnabled = false;\n                    var img = ctx.getImageData(0, 0, actualWidth, actualHeight);\n                    var data = img.data;\n                    for (var hitboxId in hitboxes.hitboxes) {\n                        var _a = hitboxId.split(\"-\"), x = _a[0], y = _a[1];\n                        var index = parseInt(y, 10) * actualWidth + parseInt(x, 10);\n                        console.log({ x: x, y: y, index: index });\n                        data[index * 4] = 255;\n                        data[index * 4 + 3] = 255;\n                    }\n                    ctx.putImageData(img, 0, 0);\n                    canvasContainer.appendChild(canvas);\n                };\n                return [2 /*return*/];\n        }\n    });\n}); };\nmain();\nexport {};\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__spreadArray","to","from","pack","ar","l","Array","slice","concat","scale","canvasContainer","hitboxes","actualWidth","actualHeight","images","scaledImages","makeImg","scaledImagesWithImages","makeCanvas","scaledImagesWithImagesWithCanvases","drawImg","state","clickLock","resetButton","_a","document","getElementById","Error","ids","id","src","width","left","top","map","index","rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","Math","floor","height","forEach","style","position","image","container","img","createElement","appendChild","onLoad","startsWith","pixelFinder","pxlCtx","getContext","drawImage","pix","getImageData","data","x","removeEventListener","addEventListener","all","canvas","background","ctx","imageSmoothingEnabled","tint","clear","clearRect","color","_b","alpha","backBuffer","btx","fillStyle","globalCompositeOperation","fillRect","globalAlpha","lock","filter","res","hitboxId","target","_loop_1","instructionsContent","rem","getBoundingClientRect","offsetX","offsetY","find","parseInt","split","cavity","selected","image_1","_c","setTimeout","textContent","remaining","quot","solve"],"sourceRoot":""}